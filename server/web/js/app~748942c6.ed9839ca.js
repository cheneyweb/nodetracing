(function(e){function t(t){for(var r,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={"app~748942c6":0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/nodetracing/web/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([0,"chunk-vendors~253ae210","chunk-vendors~7274e1de","chunk-vendors~62ab5815","chunk-vendors~db300d2f","chunk-vendors~2aec3c5f","chunk-vendors~2119ef82","chunk-vendors~ec219104","chunk-vendors~be6a9b4d","chunk-vendors~a3df519a","chunk-vendors~ed9be1e3","chunk-vendors~d71bf088","chunk-vendors~41ff223c","chunk-vendors~26381bd2","chunk-vendors~a31b3962","chunk-vendors~88ded296","chunk-vendors~f3137b1a","chunk-vendors~64e68313","chunk-vendors~dc26c9a5","chunk-vendors~588225d9","chunk-vendors~4813aef3","chunk-vendors~bdcda83c","chunk-vendors~16d3814e","chunk-vendors~ef4b7b69","chunk-vendors~5f2a7c9c","chunk-vendors~deda5bc4","chunk-vendors~6216c3af","chunk-vendors~9c5b28f6","chunk-vendors~ec8c427e","chunk-vendors~c8728516","chunk-vendors~cf8ca540","chunk-vendors~d2305125","chunk-vendors~4a7e9e0b","chunk-vendors~dde583c9","chunk-vendors~9120e007","chunk-vendors~03631906","chunk-vendors~87de5440","chunk-vendors~2900d54e","chunk-vendors~9614c307","chunk-vendors~cfcd6536","chunk-vendors~f538a826","chunk-vendors~fd542d86","chunk-vendors~10d884ce","chunk-vendors~7621f983","chunk-vendors~02fca611"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"428c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAADm0lEQVRYCcWWPWiUQRCGcybREI2IikIECTGFjT8RMZZWloI2okUKsVEbC8FKbW0EsbKwtVAQUSGNBH9QESUGBEVQg0UEkVgogvk/n3dv3/P7bi/cXbzowHszOzM7szsz3yYtLf+ZCkuVv1gsLiO2IJovFArzJfEf/MbkuUzSgeTCiSK3axELJdJt4QNsPwSWgyF09xcRrrEtJG3VDvhxUElnoy34NBa5Dm+yhX7De8DnmH0SPhXlX/D+ykN4SHIpcFS/2qz0Gp60TDqgW/lmG5HXgTmwAqgFs6AD7ACicpxykpI+lK+Vfmmz+ii7ejqttXzQuccKIl8Fl/8ctl3wM0CJZ4ATFZFFEyXW4nVcWhtvTaBecBE8BiPgLjgJOuUK160CIXeAA2AIiGbAxyDlf4ZZdgJVzAdzmBA0VAOjgn0F1egpyh7tgq8Hp8AoEKnX18Be0A2ugi9AsW6ATXFf2naMHqB+5J9ApIAqqzALNFCiZ+A8+KYF9AlcAOFgSmJCp0NqJgIhp8llweDP5zayyJNbWv35VXlNzxEGgQYuEHJrhIbYQ6n4Wi+Y3LffgtM4EGkAq5GqIbrnpOKs20CSAF31fmc2q+8eiNXIqzK2aqKnt0vBcdAt9c7rS0gIvf0TmxU6gJ0mkadsqMHlR/zqiWvszZlVNi4TbjOG/D5a9V1Xo/AWYLhDcrVJ3/tfkR4VVUBct7oco6m8KqtsghLrYWkHogGSd2kPvD1eoGRZ7C9BPIznkLOUHcgxDLei8Q18t/LBNf3JEDZ8FgeBHwQPgL6KCfABXAdbY8ITyHobRKedCNmPmaZfX4Y/S3EPu91TLifgSihAH9gOwisWkzvJLvSvgUgvXXe0u01JAnzqqxKO4eTZCOh0IB8uJGG9ElwBonGwPx5iDfIguBRxBO6/I+UHKhs/kdkQqgHXK5aUD12oREyoBD+ASH/EhoOU/3nEcnP0r68SyakqFAQMvY5Be1k/zOTUs234aX+CTv8XNJccFH4MiKZLLPfrQxxVdiyhFc0pRemNUNx9+oGSlmV0e4JH9GnWAaoljHnKzD5++oOhWQdwltEo+Mm2Xty6V1GZO0jWsWGZfobbwdeCd0Cknuux0iC6/y+Rw+fYcJJaGwgchgq+E7wFlfQCRZ/iwMuVd19qxa/LTuA2/kDp1hvYcBhsAyr9CLiJ7Ts2/9eNaglICRYKi618c/s0tQIOSiLF1UE0aM4xRwWSwfsN0qUOm2XynvYAAAAASUVORK5CYII="},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire",dark:""}},[n("Layout")],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isShow?r("v-navigation-drawer",{attrs:{clipped:"",fixed:"",app:"",width:"200"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},[r("v-list-tile",[r("v-list-tile-action",[r("v-icon",[e._v("dashboard")])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("Dashboard")])],1)],1),r("v-list-tile",{attrs:{to:"/topology"}},[r("v-list-tile-action",[r("v-icon",[e._v("device_hub")])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("Topology")])],1)],1),r("v-list-tile",{attrs:{to:"/service"}},[r("v-list-tile-action",[r("v-icon",[e._v("scatter_plot")])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("Service")])],1)],1),r("v-list-tile",{attrs:{to:"/operation"}},[r("v-list-tile-action",[r("v-icon",[e._v("view_list")])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("Operation")])],1)],1),r("v-list-tile",[r("v-list-tile-action",[r("v-icon",[e._v("settings")])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("Setting(Plan...)")])],1)],1)],1)],1):e._e(),e.isShow?r("v-toolbar",{attrs:{app:"",fixed:"","clipped-left":"",dense:""}},[r("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),r("v-toolbar-title",[e._v("NodeTracing")]),r("img",{attrs:{src:n("428c")}}),r("v-spacer"),r("v-btn",{attrs:{flat:""},on:{click:e.logout}},[e._v("Logout")])],1):e._e(),r("v-content",[r("router-view")],1)],1)},s=[],c={data:function(){return{drawer:null}},computed:{isShow:function(){return"/"!=this.$route.path}},methods:{logout:function(){localStorage.clear(),this.$router.push({path:"/"})}}},l=c,u=n("2877"),d=n("6544"),p=n.n(d),v=n("8336"),h=n("549c"),f=n("132d"),g=n("8860"),m=n("ba95"),b=n("40fe"),w=n("5d23"),A=n("f774"),y=n("9910"),S=n("71d9"),x=n("706c"),k=n("2a7f"),O=Object(u["a"])(l,i,s,!1,null,null,null);O.options.__file="Layout.vue";var C=O.exports;p()(O,{VBtn:v["a"],VContent:h["a"],VIcon:f["a"],VList:g["a"],VListTile:m["a"],VListTileAction:b["a"],VListTileContent:w["a"],VListTileTitle:w["b"],VNavigationDrawer:A["a"],VSpacer:y["a"],VToolbar:S["a"],VToolbarSideIcon:x["a"],VToolbarTitle:k["a"]});var I={name:"App",components:{Layout:C}},V=I,_=n("7496"),R=Object(u["a"])(V,a,o,!1,null,null,null);R.options.__file="App.vue";var j=R.exports;p()(R,{VApp:_["a"]});var T=n("8c4f"),L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{"justify-center":"","fill-height":""}},[r("v-container",{attrs:{fluid:""}},[r("br"),r("br"),r("v-layout",{attrs:{"align-center":"","justify-center":"","fill-height":""}},[r("v-flex",{attrs:{xs12:"",sm4:"","mr-1":""}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",[r("v-toolbar-title",[e._v("NodeTracing")]),r("img",{attrs:{src:n("428c")}}),r("v-spacer")],1),r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{"prepend-icon":"person",name:"login",label:"Account",type:"text",messages:["e.g. admin"]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{"prepend-icon":"lock",name:"password",label:"Password",type:"password",messages:["e.g. 123456"]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{on:{click:e.login}},[e._v("Login")])],1)],1)],1)],1),r("br"),r("v-layout",{attrs:{"justify-center":"","fill-height":""}},[r("v-flex",{attrs:{xs12:"",sm4:""}},[r("div",{staticClass:"text-xs-center"},[e._v("2018-2019 ©CheneyXu")])])],1)],1),r("v-snackbar",{attrs:{top:"","auto-height":"",color:"error"},model:{value:e.err,callback:function(t){e.err=t},expression:"err"}},[e._v("\n    "+e._s(e.errMsg)+"\n    "),r("v-btn",{attrs:{flat:""},on:{click:function(t){e.err=!1}}},[e._v("Close")])],1)],1)},E=[],N=(n("96cf"),n("3b8d")),D=n("279c"),B=n.n(D),z={data:function(){return{username:null,password:null,err:!1,errMsg:""}},created:function(){localStorage.getItem("token")&&this.$router.push({path:"/home"})},methods:{login:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.username||!this.password){e.next=7;break}return e.next=3,this.$store.dispatch("login",{username:this.username,password:B.a.hashSync(this.password)});case 3:t=e.sent,t?(localStorage.setItem("token",t),this.$router.push({path:"/home"})):(this.err=!0,this.errMsg="Auth Failed"),e.next=9;break;case 7:this.err=!0,this.errMsg="Auth Failed";case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},M=z,G=n("b0af"),F=n("99d9"),W=n("a523"),J=n("0e8f"),P=n("4bd4"),X=n("a722"),Y=n("2db4"),H=n("2677"),U=Object(u["a"])(M,L,E,!1,null,null,null);U.options.__file="Login.vue";var Z=U.exports;p()(U,{VBtn:v["a"],VCard:G["a"],VCardActions:F["a"],VCardText:F["b"],VContainer:W["a"],VFlex:J["a"],VForm:P["a"],VLayout:X["a"],VSnackbar:Y["a"],VSpacer:y["a"],VTextField:H["a"],VToolbar:S["a"],VToolbarTitle:k["a"]});var $=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:"","fill-height":"","justify-center":""}},[n("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"dag"}})])},q=[],K=(n("7f7f"),{mounted:function(){this.drawDAG()},methods:{drawDAG:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("serviceDAG",{});case 2:t=e.sent,t.legend.textStyle={color:"white"},this.$echarts.init(document.getElementById("dag")).setOption({backgroundColor:"#303030",title:{text:"Services DAG",textStyle:{color:"white"}},series:[{label:{normal:{position:"top",textStyle:{fontSize:22},show:!0}},edgeSymbol:["circle","arrow"],edgeLabel:{normal:{formatter:function(e){return e.data.category},show:!0,textStyle:{fontSize:20}}},type:"graph",lineStyle:{normal:{opacity:.9,width:1,curveness:0}},data:t.data,links:t.links,categories:t.categories,layout:"force",symbolSize:25,force:{repulsion:1e3,edgeLength:[150,300]},roam:!0,focusNodeAdjacency:!0}],legend:t.legend,tooltip:{formatter:function(e){return"edge"===e.dataType?e.data.category+": "+e.data.target:e.data.category+": "+e.data.name}},animationEasingUpdate:"quinticInOut",animationDurationUpdate:1500});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}}),Q=K,ee=Object(u["a"])(Q,$,q,!1,null,null,null);ee.options.__file="Topology.vue";var te=ee.exports;p()(ee,{VContainer:W["a"]});var ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:"","fill-height":"","pt-2":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-select",{attrs:{items:e.services,label:"Select service"},on:{change:e.changeService},model:{value:e.selectedService,callback:function(t){e.selectedService=t},expression:"selectedService"}})],1),n("v-flex",{attrs:{xs12:""}},[n("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"dag"}})])],1)],1)},re=[],ae=n("bd86"),oe={data:function(){return{selectedService:"",services:[]}},mounted:function(){this.getServices()},methods:{getServices:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getServices",{});case 2:t=e.sent,this.services=t,this.selectedService=this.services[0],this.changeService(this.selectedService);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeService:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.drawDAG(t);case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),drawDAG:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("spanDAG",{serviceName:t});case 2:r=e.sent,r.legend.textStyle={color:"white"},this.$echarts.init(document.getElementById("dag")).setOption({backgroundColor:"#303030",title:{text:"【".concat(t||"Select service","】 Spans DAG"),textStyle:{color:"white"}},series:[(n={label:{normal:{position:"top",textStyle:{fontSize:22},show:!0}},edgeLabel:{normal:{formatter:function(e){return e.data.category},show:!0,textStyle:{fontSize:20}}},edgeSymbol:["circle","arrow"],edgeSymbolSize:[10,10],type:"graph",layout:"force",force:{repulsion:60},draggable:!0,lineStyle:{normal:{opacity:.9,width:1,curveness:0}},data:r.data,links:r.links,categories:r.categories},Object(ae["a"])(n,"layout","force"),Object(ae["a"])(n,"symbolSize",25),Object(ae["a"])(n,"force",{repulsion:1e3,edgeLength:[150,300]}),Object(ae["a"])(n,"roam",!0),Object(ae["a"])(n,"focusNodeAdjacency",!0),n)],legend:r.legend,tooltip:{formatter:function(e){return"edge"===e.dataType?e.data.category+": "+e.data.target:e.data.category+": "+e.data.name}},animationEasingUpdate:"quinticInOut",animationDurationUpdate:1500});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},ie=oe,se=n("b56d"),ce=Object(u["a"])(ie,ne,re,!1,null,null,null);ce.options.__file="Service.vue";var le=ce.exports;p()(ce,{VContainer:W["a"],VFlex:J["a"],VLayout:X["a"],VSelect:se["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:"","fill-height":"","pt-2":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs6:""}},[n("v-select",{attrs:{items:e.services,label:"Select service"},on:{change:e.getServiceOperations},model:{value:e.selectedService,callback:function(t){e.selectedService=t},expression:"selectedService"}})],1),n("v-flex",{attrs:{xs6:""}},[n("v-select",{attrs:{items:e.operations,label:"Select operation"},on:{change:e.getOperationSpans},model:{value:e.selectedOperation,callback:function(t){e.selectedOperation=t},expression:"selectedOperation"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-data-table",{attrs:{headers:e.headers,items:e.spans,"hide-actions":"",loading:e.loading,"disable-initial-sort":e.disableInitialSort},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-left",on:{click:function(n){e.openSpan(t.item.id)}}},[e._v(e._s(t.item.operationName)+"："+e._s(t.item.id))]),n("td",{on:{click:function(n){e.openSpan(t.item.id)}}},[e._v(e._s(e._f("formatDate")(t.item.startMs)))]),n("td",{on:{click:function(n){e.openSpan(t.item.id)}}},[n("v-layout",[n("v-flex",{attrs:{xs11:""}},[n("v-progress-linear",{attrs:{color:100==t.item.percent?"error":"blue-grey",height:"20",value:t.item.percent}})],1),n("v-flex",{attrs:{xs1:"","align-self-center":""}},[e._v(e._s(t.item.duration)+"ms")])],1)],1)]}}])},[n("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1),n("Span",{attrs:{selectedOperation:e.selectedOperation,spanId:e.spanId}})],1)},de=[],pe=n("5a0c"),ve=n.n(pe),he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"1000"},model:{value:e.openSpan,callback:function(t){e.openSpan=t},expression:"openSpan"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey darken-2",attrs:{"primary-title":""}},[e._v(e._s(e.selectedOperation)+"："+e._s(e.dialogTitle))]),n("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"gantt"}}),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.openSpan=!1}}},[e._v("关闭")])],1)],1)],1)},fe=[],ge=n("5d73"),me=n.n(ge),be={data:function(){return{dialogTitle:null}},props:["selectedOperation","spanId"],methods:{drawGantt:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,o,i,s,c,l,u,d,p,v,h,f,g,m,b,w,A,y,S;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return S=function(e,t){var r=t.value(0),a=t.coord([t.value(1),r]),o=t.coord([t.value(2),r]),i=.5*t.size([0,1])[1],s=t.value(3),c=n.$echarts.graphic.clipRectByRect({x:a[0],y:a[1]-i/2,width:o[0]-a[0],height:i},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return c&&{type:"rect",shape:c,style:t.style({text:"".concat(s,"ms")})}},n=this,e.next=4,this.$store.dispatch("getTracerSpans",{spanId:t});case 4:for(r=e.sent,a=r.spanArr[0].startMs,o=[],i=[],s=[],c=["#669999","#996600","#990033","#336633","#999900","#FF9933","#663366","#CCCC00","#CC6633","#99CC33"],l={},u=0;u<r.serviceArr.length;u++)l[r.serviceArr[u].serviceName]=c[u];for(d=0;d<r.spanArr.length;d++)p=r.spanArr[d],i.push({name:p.serviceName,value:[r.spanArr.length-1-d,p.startMs,p.finishMs,p.durationMs,p.serviceName],itemStyle:{normal:{color:l[p.serviceName]}}}),o.unshift(p.operationName);for(v=!0,h=!1,f=void 0,e.prev=16,g=me()(r.serviceArr);!(v=(m=g.next()).done);v=!0){for(b=m.value,w={name:b,type:"custom",renderItem:S,itemStyle:{normal:{opacity:.8}},encode:{x:[1,2],y:0},data:[]},A=0;A<i.length;A++)y=i[A],y.value[4]==b&&w.data.push(y);s.push(w)}e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](16),h=!0,f=e.t0;case 24:e.prev=24,e.prev=25,v||null==g.return||g.return();case 27:if(e.prev=27,!h){e.next=30;break}throw f;case 30:return e.finish(27);case 31:return e.finish(24);case 32:this.$echarts.init(document.getElementById("gantt")).setOption({color:c,backgroundColor:"gray",tooltip:{formatter:function(e){return"".concat(e.marker).concat(e.name,"<br/>")+"service：".concat(e.value[4],"<br/>")+"range：".concat(e.value[1]-a,"ms-").concat(e.value[2]-a,"ms<br/>")+"duration：".concat(e.value[3],"ms")}},title:{text:"Operation Tracer \n span:".concat(r.spanArr.length," depth:").concat(r.depth),left:"center"},dataZoom:[{type:"slider",filterMode:"weakFilter",showDataShadow:!1,bottom:10,height:10,borderColor:"transparent",backgroundColor:"#e2e2e2",handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",handleSize:20,handleStyle:{shadowBlur:6,shadowOffsetX:1,shadowOffsetY:2,shadowColor:"#aaa"},labelFormatter:""},{type:"inside",filterMode:"weakFilter"}],xAxis:{min:a,scale:!0,axisLabel:{formatter:function(e){return Math.max(0,e-a)+" ms"}},splitLine:{show:!0,lineStyle:{type:"dashed"}}},yAxis:{data:o,splitLine:{show:!1,lineStyle:{color:"dark"}}},legend:{type:"scroll",top:40},series:s});case 33:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])}));function t(t){return e.apply(this,arguments)}return t}()},computed:{openSpan:{get:function(){return this.$store.state.openSpan&&this.spanId&&(this.dialogTitle=this.spanId,this.drawGantt(this.spanId)),this.$store.state.openSpan},set:function(e){this.$store.commit("openSpan",e)}}}},we=be,Ae=n("12b2"),ye=n("169a"),Se=n("ce7e"),xe=Object(u["a"])(we,he,fe,!1,null,null,null);xe.options.__file="Span.vue";var ke=xe.exports;p()(xe,{VBtn:v["a"],VCard:G["a"],VCardActions:F["a"],VCardTitle:Ae["a"],VDialog:ye["a"],VDivider:Se["a"],VSpacer:y["a"]});var Oe={components:{Span:ke},data:function(){return{loading:!0,services:[],operations:[],spans:[],selectedService:"",selectedOperation:"",disableInitialSort:!0,headers:[{text:"Operation",align:"left",sortable:!1,value:"operationName",width:"300"},{text:"Start",value:"startMs",width:"200"},{text:"Duration",value:"duration"}],spanId:null}},filters:{formatDate:function(e){return ve()(e).format("YY/MM/DD HH:mm:ss")}},created:function(){this.getServices()},methods:{getServices:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$store.dispatch("getServices",{});case 3:t=e.sent,this.services=t,this.selectedService=this.services[0],this.getServiceOperations(this.selectedService);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getServiceOperations:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$store.dispatch("getServiceOperations",{serviceName:this.selectedService});case 3:n=e.sent,this.operations=n,this.selectedOperation=this.operations[0],this.getOperationSpans();case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getOperationSpans:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getOperationSpans",{serviceName:this.selectedService,operationName:this.selectedOperation});case 2:t=e.sent,this.spans=t,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openSpan:function(e){this.spanId=e,this.$store.commit("openSpan",!this.$store.state.openSpan)}}},Ce=Oe,Ie=n("8fea"),Ve=n("8e36"),_e=Object(u["a"])(Ce,ue,de,!1,null,null,null);_e.options.__file="Operation.vue";var Re=_e.exports;p()(_e,{VContainer:W["a"],VDataTable:Ie["a"],VFlex:J["a"],VLayout:X["a"],VProgressLinear:Ve["a"],VSelect:se["a"]}),r["a"].use(T["a"]);var je=new T["a"]({routes:[{path:"/",name:"login",component:Z},{path:"/home",name:"home",component:te},{path:"/topology",name:"topology",component:te},{path:"/service",name:"service",component:le},{path:"/operation",name:"operation",component:Re}]}),Te=n("795b"),Le=n.n(Te),Ee=(n("28a5"),n("2f62")),Ne=n("bc3a"),De=n.n(Ne),Be="http://".concat(window.location.hostname,":3636");r["a"].use(Ee["a"]);var ze=new Ee["a"].Store({state:{openSpan:!1},mutations:{openSpan:function(e,t){e.openSpan=t}},actions:{serviceDAG:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("".concat(Be,"/nodetracing/echart/dag"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),spanDAG:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n.serviceName){e.next=7;break}return e.next=3,De.a.get("".concat(Be,"/nodetracing/echart/dag/").concat(n.serviceName));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),getServices:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("".concat(Be,"/nodetracing/service"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getServiceOperations:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n.serviceName){e.next=7;break}return e.next=3,De.a.get("".concat(Be,"/nodetracing/operation/").concat(n.serviceName));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),getOperationSpans:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n.serviceName||!n.operationName){e.next=7;break}return e.next=3,De.a.get("".concat(Be,"/nodetracing/operation/").concat(n.serviceName,"/").concat(n.operationName));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),getTracerSpans:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n.spanId){e.next=7;break}return e.next=3,De.a.get("".concat(Be,"/nodetracing/span/tracer/").concat(n.spanId));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(N["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,De.a.post("".concat(Be,"/nodetracing/user/login"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()}});De.a.interceptors.request.use(function(e){return e.headers.token=localStorage.getItem("token"),e}),De.a.interceptors.response.use(function(e){return e},function(e){if(401==e.response.status)return localStorage.clear(),window.location.href=window.location.href.split("#")[0],Le.a.resolve(e)});var Me=n("9483");Object(Me["a"])("".concat("/nodetracing/web/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Ge=n("bb71"),Fe=(n("da64"),n("313e"));r["a"].prototype.$echarts=Fe,r["a"].use(Ge["a"],{iconfont:"md"}),r["a"].config.productionTip=!1,new r["a"]({router:je,store:ze,render:function(e){return e(j)}}).$mount("#app")}});